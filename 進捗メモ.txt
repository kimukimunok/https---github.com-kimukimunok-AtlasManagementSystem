現状、編集ボタン、削除ボタン着手中
編集ボタンと、削除ボタンは機能確認している。OK
あとはバリデーションを進める。
以前のphp artisan make:request RegisterRequestでバリデーションの為の子クラスを作成（新規作成の時のバリデーションクラス）これを元に編集用(postEditDeleteRequest?)を作る.
fromrequestでバリデーション作った時は、controllerのuseとメソッド、bladeは@ifでエラー文の表示の分追加を忘れないようにする。
修正項目
１バリデーションを日本語化していない
https://codelikes.com/laravel-validation-message-ja/#google_vignette
上のサイト参考にエラー表示全体を日本語化した。
ついでにタイムゾーンも日本にした。
２サイドバーの表示権限が出来てない。生徒に表示されている。
→講師と生徒の番号を勘違いしていた。
sidebar.bladeのスクール予約一覧と、スクール枠登録の部分を直して完了

・いいねの数を表示させる。
リレーションに苦戦～hasmany('app\model'～)だと取得できないのはなんでなんだろうかね。ちょっと分からない。

・コメントの数を表示させる。
表示はできた。次はバリデーション。次も子クラス作って指定していく感じかな。
php artisan make:request PostCommentRequest実行

Cannot declare class App\Http\Requests\PostCommentRequest, because the name is already in useこのエラーまた出た
対策調べる。

問題のサブカテゴリー追加とは。
・まず、メインカテゴリーと同じような構造の物をメインカテゴリーの下に作る
改修内容どんな？
■サブカテゴリーを登録する機能を追加する
■バリデーションの条件は「簡易基本設計書」を参照
■新規投稿時、サブカテゴリーも登録できるようにする

１■サブカテゴリーを登録する機能を追加する
→リレーションを駆使し、メインカテゴリーの中にサブカテゴリーの名前を登録する。

メインカテゴリーIDにサブカテゴリーNAMEをいれる。繋ぐ？
postscontollerにサブカテゴリー追加と、サブカテゴリー登録の記述をしてみた。
追加ボタンが機能してない。（bladeか？）
次、メインカテゴリーととサブカテゴリーに追加することが出来たから、次は投稿するときのカテゴリーに登録できるようにしたい。
がその前にバリデーションを作る事


２■バリデーションの条件は「簡易基本設計書」を参照
→
php artisan make:request SubCategoryRequest
php artisan make:request MainCategoryRequest
実行
・firstは最初の値を取得する為複数のエラーメッセージを表示できない。
・hasは複数のエラーメッセージを表示できる。

なんかバリデーション通りに記述するとエラー出る。何かあるみたい。調べる。修正
???リレーション多対多した。
コントローラー記述してみた。
ブレードも見た。
次は何だ。

Laravelは基本はテーブル名は複数形、モデル名は単数形で作成します。
テーブル名は複数形を用いる
Model名はテーブル名の単数形を使う
コントローラー名はテーブル名の単数形+Controllerとする

！！！！！！！！バリデーション部分に問題がある！！！！！！！！！！！
バリデーション記述するとテーブルノットファウンドが出たからフォームリクエスト部分に何かしらの問題がある。
サブカテゴリーとかメインカテゴリーが単数形か複数形かの問題だった。

３■新規投稿時、サブカテゴリーも登録できるようにする
→

使う所
postsBladeとpostsCreateとpostsController
メインカテゴリーIDにサブカテゴリー名前を登録する。


SQLSTATE[42S02]: Base table or view not found: 1146 Table 'atlasmanagementsystem.main_category_name' doesn't exist (SQL: select count(*) as aggregate from `main_category_name` where `main_category_name` = 一つ目)
A table was not found
そもそも、main_category_nameっていうテーブルが無いよーっていうエラーだからあるテーブルを指定すればいい。テーブル「main_categories」フィールド「id」「main_category」「created_at」がある
create.bladeとcontlloer内のmain_category_nameで指定している部分をmain_categoriesに変更。

エラーで検索すると入力規則を変えたりとかfromrequest無いを変えればいいとか出たけどやったが解消せず

SQLSTATE[42S22]: Column not found: 1054 Unknown column 'sub_category_name' in 'where clause' (SQL: select count(*) as aggregate from `sub_categories` where `sub_category_name` = 一つ目に追加)
A column was not found


3/18
メインカテゴリーとサブカテゴリーが追加できるようになった。
３■新規投稿時、サブカテゴリーも登録できるようにする
→新規投稿の中でサブカテゴリーを選択できるようにする。

メイン、サブと選べるようにして、サブカテゴリー内に投稿を登録するようにする。みたいな

ポストクリエイト（ブレード側）に選択肢を表示させる。(foreachか)
foreachとoptionvalueを駆使して表示はできた。
ポストコントローラーのpostcreate

■検索欄に入力したキーワードがサブカテゴリーと完全一致したら対象のサブカテゴリーに属している投稿のみ表示
　１まず、改修課題レイアウトを見るに、「カテゴリー検索」の項目を投稿画面に追加する。
　２メイン毎に：フレームワーク・サブ1：Laravelサブ2：Reactがスライド機能で表示するようにする。
「posts.blade」でスライド機能とかメインサブnameをそれぞれ表示させるようにする。
divでJSモーダルオープンを作って、矢印が変わる所はJSで調整する。
CSS内で見た目を調整留守。
ここまで行う！
postSearchRequestをさがせ。
なんかよく分からないけど、サブカテゴリーの投稿のみを抽出するにはorwherehasを使うっぽい。
https://qiita.com/kakudaisuke/items/39d4e2b75f0416c5e70aによると。
1.orは二つ目以降の条件追加したいときに付ける言葉「AもしくはB」
2.問い合わせに条件を付ける物。「どこのー」→「idがこれこれのやつー」みたいのを検索。
3.モデルからリレーション先のテーブルからレコードを探してくれるメソッド→つまり、サブカテゴリーの投稿を持ってきてくれる。
これ使用例。助かった。
https://qiita.com/kakudaisuke/items/39d4e2b75f0416c5e70a


サブカテゴリー入力検索やってなかった
ちなみに$requestとは
https://nebikatsu.com/6784.html/
入力された値(変数)のこと。それをフォームに送って処理される。
検索や登録などいろいろ。基礎的部分覚えること。

■サブカテゴリーは紐づいているメインカテゴリーごとに一覧で表示する。
右側サイドバーのメインカテゴリーをクリックすると紐づくサブカテゴリーが一覧となり表示される。
■サブカテゴリーをクリックしたら対象のサブカテゴリーに属している投稿のみ表示
おそらくできた。保存
先にサブカテゴリー検索の機能を終わらせる。
次機能追加(ユーザー検索)※また時間かかりそう(´;ω;｀)
でもサブカテゴリー検索を参考にしたらなんとなくわかりそう。
２と３は似たようなものでは。。。

4月はここから！
１一覧画面で選択科目の表示
ユーザー検索一覧画面で選択科目を表示させる。→現状表示されてない。
どうする？→ユーザー検索画面のユーザー一覧で生徒ユーザーの選択科目を表示させること。
profile.blade内(違ってないけど違う。profieはユーザー画面で、一覧画面ではなかった。search.bladeを編集する。)に選択科目の部分が空欄である。そこに選択した選択科目を送ることをする。

２検索条件欄に選択科目の表示を追加
 usersコントローラーのshowUsersからデータを持ってくるため form="userSearchRequest"使用
input typw checkboxでチェックボックス作成、で選択科目のIDを選択可能にする。できたぽい 機能は次
３選択科目での検索機能を追加
サブカテゴリーの時のを参考にしてみる。
キーワードを検索は機能している状態だった。
出来てないやつ↓
検索条件の追加の選択科目で検索。と
redmineに※複数の科目で検索した場合、あてはまる科目を一つでも選択しているユーザーはすべて表示させる。という記載あり、
つまり完全一致でなくていいってことだと推測
phpにsearchsっていうところがあってそこが検索機能色々をしてるみたい。めんどくさそう、、理解しながらやっていく。

whereIn( '判定したいテーブル名.判定したいカラム名', [判定したいカラム名の値として期待されるものを配列状に記載する])

レイアウトのほうで検索とリセットボタンの配置が検索のほうが上だったから入れ替えた。
掲示板で投稿した時に、選択したサブカテゴリーもデータベースに登録されるようにしてください！
投稿詳細画面にサブカテゴリーを表示しなければならなかった。
 ちなみに、foreach文とは、配列の繰り返し処理を行う場合に使用。使用すると配列の要素の数繰り返し処理を行う。
PostsContoller内に新規投稿時サブカテゴリーを追加するところあった。
選択科目での検索苦労したー
searchの作り方これまでと違ったからどういう処理なのか分かるのに時間かかったし時間かかれば忘れるし、負のループ
表示は何となくわかったけど最後のinput checkboxのname属性は盲点だった、フィールド指定のための必須項目だったんだね。。。エラーとして出ないからわからなかった。。。




とりあえず次、予約画面の記述進めていこう。
１予約画面の表示形式を変更
■スクール予約表の過去日は下記の表示形式にする
・背景色をグレーにする
・予約していない場合は受付終了の文言を表示し、予約している場合は、参加した部数を表示させる。

カレンダーの処理等にはphpが中心に使われていて、それぞれadmin=管理者とgeneral=一般ユーザーのフォルダがあった。
表示に関してはgeneralのviewに記述すればいいっぽい・
カレンダーのviewで過去日に受付終了を表示させることはできた。
背景色について
CSS記述にクラスのpast-dayがありそれを指定して、過去日の背景色をグレーにした。CSSにもともとあったんかい・・・

次、「予約している場合は、参加した部数を表示させる。」
現時点、まず予約できていない。
何をするか、
・予約機能を作る。
・viewで登録ボタンを押したら、コントローラーに処理を送って、データベースに登録する。の流れ。
指定した枠数の予約が入っていればその時間を選択できない機能。「　https://terakoya.sejuku.net/question/detail/20436　」
PHPのin_array関数は、配列の中に指定した値が存在するかチェックする関数です。
in_array ($検索する値 , $配列 [, $strict = FALSE ] )
if(in_array('orange'(検索する値), $array($arryの中に存在するか)))
※TRUE FALSEをつけると、配列の中に存在した場合、TRUE,FALSEいづれかだった場合の結果を表示することが可能。

→→予約機能できてないと勘違いしてたけど・・・・・・
予約枠の登録をしてなかったから予約ができなかっただけだった(泣)
そこまで見てなかったぁぁ
てことは、予約している場合は、参加した部数を表示させる。は完了ということで、現状キャンセルができない状態となったから、いったんこの課題は終了

予約をキャンセルをするための確認画面を追加
■キャンセルボタン(予約した場所と部数が表示されたボタン)を押下すると、キャンセル確認のモーダルを表示する
■モーダルに表示する内容は下記２つ
・予約日
・予約時間(場所と部数)

現状キャンセルボタンが無いためキャンセルボタンを作り、押すとキャンセルしますかのモーダルを表示させる。
〇月×日　リモ1部　をキャンセルしますか
みたいな感じで
CSSでのモーダルの作り方参考
https://syncer.jp/jquery-modal-window#google_vignette

laravel（JS）を使ったモーダル作成の仕方参考
https://walking-succession-falls.com/%E3%80%90laravel%E3%80%91%E3%83%A2%E3%83%BC%E3%83%80%E3%83%AB%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D/

流れは簡単！！
bladeにモーダルウィンドウを出現させる記述を記載
出現したモーダルウィンドウを読み込むページを作成
コントローラー側で表示したViewを返す記述

次やり始めるときは一旦現状の立ち位置を把握して、やることとわからないことを分けて進めていくこと
・5/8 現状把握
返却されたタスクの予約された日時を予約ページに表示するも忘れない。→、未来の表示はできている。過去の日の表示ができていない。
→予約。bladeの過去の日に予約したものを表示させるようにする。→未来の表示はできているからそれを過去の記述にも行う。
→過去日の$html記述内にに予約情報の変数の$reserveDayを記述し表示できるようにした。


・キャンセルモーダル途中、モーダルが出てこない。
まずはモーダルが出てくるところから始める。→Bladeにモーダルオープン記述、JSで動きを作る。→ルーティング→ルーティング先(モーダル画面のページをつくる)
モーダルできた。

予約時間と予約日が表示できないため。そのやり方について聞きたい。
現状、モーダル側で予約情報の表示ができた！！！！！！！
https://www.tagindex.com/html/form/button.html
次回、キャンセル機能の実装！！！！予約している人数の表示！！！！！

スクール予約画面の改修
■キャンセル確認のモーダルにあるキャンセルボタンを押下すると予約をキャンセル機能を追加する。
ボタンを押したときにコントローラーのキャンセルメソッドを行って、
変数相違と思っていたら違った。bladeのformの仕方だった。
一部にform="~"と指定するのではなく、やるなら全部に指定すること。もしくは<form>で囲んだなら必要ないため、つけない。どちらか
■閉じるボタンを押下するとモーダルを閉じる
参考→「https://b-risk.jp/blog/2023/08/modal-window/#:~:text=%E3%82%AF%E3%83%AD%E3%83%BC%E3%82%BA%E3%80%81%E3%82%AD%E3%83%A3%E3%83%B3%E3%82%BB%E3%83%AB%E3%83%9C%E3%82%BF%E3%83%B3%E3%81%AF%E5%8F%B3%E4%B8%8A,%E3%81%93%E3%81%A8%E3%82%82%E3%81%82%E3%82%8B%E3%82%88%E3%81%86%E3%81%A7%E3%81%99%E3%80%82」


5/28現状確認
タスクリスト残り
・予約している人数を表示　現状ここ
スクール予約画面の各日にちと各部に予約しているユーザー数の表示がされているか確認する。→できてる。各部の予約している人を表示する画面へのリンクも一応作れているが、まだエラー吐いてる。けど、人数は表示できているからこのタスクはおけ。次

・スクール予約確認画面の各部数にリンクを設置する
リンクは作れているが、「Undefined variable $reserve 」ていうエラーがある状態$reserveが無いとはどういうこっちゃ。そこから行こう。

・予約詳細ページにユーザー情報を表示する
ユーザー情報の表示、IDと、名前と、予約場所、表示OK
取得する変数見つけるの大変だた
複数表示確認済み。
だけど各名前ごとに色が変わるものに関してはノータッチレイアウト調整でやる。

あとはレイアウトの調整。
調整して全体を見直しながら、復習も兼ねたい。

1ログイン画面
大体終わった
新規登録画面の生年月日の部分を今触っている。

6/13
生年月日の部分
レイアウトでは年月日ごとに青いラインが切れている。
現状年月日は一本の線でつながっているからそれぞれに適応しなければならない。あと配置もそうか
生年月日完了
役職完了

掲示板
アコーディオンメニューOK

次ユーザー検索画面

残りCSS
/* スクール予約枠画面 */
今何をしたいか、過去日の土日の色を変えたい。が、直接的なクラスが無いためできない。
上について質問した。結論クラス名past-dayの部分の後に、「未来のほうで記述しているクラス名を持ってくるメソッドを記述した」ら状況が未来と同じになったため、土日の色が変わりました。
メソッドの先がどうなっているか考えるようにすること
/* スクール予約画面 */
予約すると空欄のサイズが変わる問題、
中のボタンのサイズが変わるからそれに合わせて空欄の大きさも変化している。
→大きさが変化しない方法はないのか（％で指定するんじゃなくて数値で指定するとか？）
→予約前と予約後のボタンの大きさを合わせるか
予約枠登録画面と見た目を一緒にしたいよね。

/* スクール予約確認 */
/* スクール予約詳細確認画面 */

https://design-library.jp/lab/icons-chevron-down
CSS内で矢印アイコン出す方法
atlasno13@gmail.com
atlas0000cs
C /Users /goof- /AtlasManagementSystem

C:\Users\goof-\AtlasManagementSystem\public\image
↑にアイコン画像入れました。
アイコンOK

7/6
トップページと掲示板画面調整完了
次回新規投稿作成画面調整完了（padding-top:15px;たくさんあるからまとめたりできないかなクラス名”padtop_15”みたいな感じで）
掲示板詳細画面の、カテゴリーモーダル開いたときのカクカクした感じ何とかならんかな。
投稿詳細画面完了（現状動きと違和感がない程度）

次スクール予約画面
１．スクール予約、予約確認、予約枠の白部分の共通化完了
次、それぞれの画面の白枠の中を調整していく。
スクール予約画面完了
スクール予約確認画面完了

新規登録画面にて、すべての項目入力してたがなぜか新規登録ボタンが、つかなかった。ソースツリーで戻りつつ確認して、性別のところの記載のクラス名を消去していたため判定されてなかった
戻したところ選択できるようになった。以上
